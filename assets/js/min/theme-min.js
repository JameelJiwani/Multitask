function paintAgent(){g_agent.el.fillStyle="yellow",g_agent.el.fillRect(0,0,30,30)}function toggleEnemyGeneration(e){isSpawning=e}function gameStart(){startTimer(),toggleEnemyGeneration(!0),playMusic(),paintAgent(),isWaitingAnswer=!1,$("body").css("cursor","none")}function gameOver(){pauseTimer(),toggleEnemyGeneration(!1),$("#score").val(timerVal),$("#Q").html(""),g_agent.el.fillStyle="green",g_agent.el.fillRect(0,0,0,0),canvas.Sound.stop("soundTrack"),$(".highscore").fadeIn("slow"),$("#startbutton").html("RETRY"),$("#startbutton").fadeIn("slow"),$("#leaderboard").addClass("leaderboards"),$("body").css("cursor","url(assets/img/favicon.ico), auto")}function updateMouse(){$(document).mousemove(function(e){mouseX=e.pageX,mouseY=e.pageY}).mouseover()}function curve(e,t,n,a,o){var r=new Array;return o?r[0]=e+Math.sin(n)*a:r[0]=e-Math.sin(n)*a,Math.floor(2*Math.random())+1>1?r[1]=t+Math.cos(n)*a:r[1]=t-Math.cos(n)*a,r}function curveWithFunction(e,t,n,a,o,r,i){var s=new Array;switch(i?r?s[0]=e+a*(Math.floor(Math.random()*n)+1):s[0]=e-a*(Math.floor(Math.random()*n)+1):r?s[0]=e+a:s[0]=e-a,o){case"sin":s[1]=n*Math.sin(e);break;default:s[1]=t}return s}function startTimer(){$("#timer").find(".value").text(0),stopwatch=setInterval(updateDisplay,1)}function pauseTimer(){clearInterval(stopwatch)}function updateDisplay(){timerVal=parseInt($("#timer").find(".value").text(),10),isSpawning&&timerVal++,$("#timer").find(".value").text(timerVal)}function playMusic(){canvas.Sound.playLoop("soundTrack")}function startCountDownClock(){second=0,countDownClock=setInterval(updateCountDown,1e3)}function updateCountDown(){second++}function stopCountDownClock(){clearInterval(countDownClock)}function storeDataInCookie(){}var enemyStreamline,enemyStreamFreq=300,questionFreq=3e3,isSpawning=!1,enemyPool=new Array,enemyCurvePool=new Array,mouseX=0,mouseY=0,g_agent,g_index,enemyTally={NWB:1,SBQ:1,BWG:1,SWP:1,SCO:1},isWaitingAnswer=!1,qList=["What is the second letter of Estonia?","What is the third letter of science?","What is the first letter of turtle?","What is the second last letter of street?","What is the last letter of facilitated?","What is the fifth letter of restaurant","What is the second letter of Chevrolet","What is the last letter of nostalgia?","The capital of Poland starts with ___","The circumference of a circle can be defined as ___ pi * r","2 b or not 2 ___","2 + 4 = __","Luv our site? (y/n)","John __ Kennedy","Elizabeth is the Queen of the U.__.","abc.xy__","8 + 1 = __","2 cubed = __"],cList=["s","i","t","e","d","a","h","a","w","2","b","6","y","f","k","z","9","8"],timeout,timeoutq,canvas=CE.defines("gameFrame").extend(Input).extend(Hit).ready(function(){canvas.Scene.call("gameScene")});canvas.Scene["new"]({name:"gameScene",materials:{sounds:{soundTrack:"../assets/audio/SoundtrackGLHF.mp3"},images:{ufo:"../assets/img/ufo.gif"}},called:function(e){},ready:function(e){function t(t,n,a,o){var r=Class.New("Entity",[e]);r.rect(40);var i="red",s=-1;switch(o){case"NWB":i="brown";break;case"SBQ":i="blue";break;case"BWG":i="green",s=1,t=0;break;case"SWP":i="purple";break;case"SCO":i="orange";break;default:i="white"}return enemyCurvePool.push([s,0]),r.position(t,n),r.el=a.createElement(40,40),r.el.fillStyle=i,r.el.fillRect(0,0,40,40),r.el.T=o,e.append(r.el),enemyPool.push(r),r}function n(){var e=Math.floor(Math.random()*$(window).height())+0,n=$(window).width(),a=new Array,r=0;for(var i in enemyTally){r+=enemyTally[i];for(var s=0;s<enemyTally[i];s++)a.push(i)}var l=Math.floor(Math.random()*r);t(n,e,o,a[l])}function a(){isWaitingAnswer?(isWaitingAnswer=!1,gameOver()):(isWaitingAnswer=!0,g_index=Math.floor(Math.random()*(qList.length-1)),$("#Q").html(qList[g_index]))}var o=this,r=this.getCanvas();updateMouse(),this.agent=Class.New("Entity",[e]),this.agent.rect(40),this.agent.position(mouseX,mouseY),this.agent.el=this.createElement(40,40),g_agent=this.agent,e.append(this.agent.el),$(document).keypress(function(e){String.fromCharCode(e.which)!=cList[g_index]?(isWaitingAnswer=!1,gameOver()):(isWaitingAnswer=!1,$("#Q").html(""))}),function i(){isSpawning&&n(),timeout=setTimeout(i,enemyStreamFreq)}(),function s(){isSpawning&&a(),timeoutq=setTimeout(s,questionFreq)}()},render:function(e){updateMouse(),this.agent.position(mouseX,Math.pow(mouseY,1));for(var t=this,n=0;n<enemyCurvePool.length;n++){var a=Math.floor(3.14*Math.random())+0,o=.3,r=curve(enemyCurvePool[n][0],enemyCurvePool[n][1],a,o,!1);switch(enemyPool[n].el.T){case"NWB":break;case"SBQ":a=1.57075,o=1,r=curve(enemyCurvePool[n][0],enemyCurvePool[n][1],a,o,!1);break;case"BWG":r=curve(enemyCurvePool[n][0],enemyCurvePool[n][1],a,o,!0),x=0;break;case"SWP":var o=.1,i=Math.floor(20*Math.random())+15;r=curveWithFunction(enemyCurvePool[n][0],enemyCurvePool[n][1],i,o,"sin",!1,!1);break;case"SCO":var o=.01;r=curveWithFunction(enemyCurvePool[n][0],enemyCurvePool[n][1],30,o,"normal",!1,!0)}enemyCurvePool[n][0]=r[0],enemyCurvePool[n][1]=r[1],enemyPool[n].move(r[0],r[1]),enemyPool[n].hit([this.agent],function(e,t){"over"==e&&(enemyTally[t.T]++,gameOver())})}e.refresh()}});var stopwatch;window.timerVal;var countDownClock,second=0,TIMEFORQ=5;